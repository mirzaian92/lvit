---
import { getCollection } from "astro:content";
import BaseLayout from "@/layouts/BaseLayout.astro";
import TrustSignals from "@/components/TrustSignals.astro";
import { SITE } from "@/lib/site";
import { breadcrumbListSchema } from "@/lib/schema";

const services = await getCollection("services");
const canonical = new URL(Astro.url.pathname, SITE.url).toString();
const jsonLd = [
  breadcrumbListSchema([
    { name: "Home", item: new URL("/", SITE.url).toString() },
    { name: "Services", item: canonical },
  ]),
];
---

<BaseLayout
  title="Managed IT Services in Las Vegas"
  description="Explore managed IT, cybersecurity, help desk support, Microsoft 365, cloud services, backup and disaster recovery, and more for Las Vegas-area businesses."
  canonical={canonical}
  jsonLd={jsonLd}
>
  <div class="space-y-10">
    <section class="rounded-2xl border border-brand-border bg-white p-10 shadow-soft">
      <h1 class="text-4xl font-semibold tracking-tight text-brand-primary sm:text-5xl">Services</h1>
      <p class="mt-4 max-w-3xl text-base leading-relaxed text-brand-text/85">
        These service pages are written specifically for Las Vegas operations: onsite realities, common
        environment patterns, and the practical guardrails that keep day-to-day IT predictable.
      </p>
      <div class="mt-7 flex flex-wrap gap-3">
        <a
          class="focus-ring rounded-full bg-brand-primary px-6 py-3 text-sm font-semibold text-white hover:brightness-95"
          href="/contact#lead-form"
        >
          Book a call
        </a>
        <a
          class="focus-ring rounded-full border border-brand-border px-6 py-3 text-sm font-semibold text-brand-primary hover:bg-brand-primary hover:text-white"
          href="/industry"
        >
          Browse industries
        </a>
      </div>
    </section>

    <TrustSignals />

    <section class="rounded-2xl border border-brand-border bg-white p-8">
      <h2 class="text-2xl font-semibold text-brand-primary">All managed services</h2>
      <p class="mt-3 text-sm text-brand-text/80">
        Start with your most urgent need. Then use the related links on each page to build a complete
        support plan.
      </p>
      <div class="mt-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        {services
          .sort((a, b) => a.data.title.localeCompare(b.data.title))
          .map((s) => (
            <a
              class="focus-ring rounded-2xl border border-brand-border bg-white p-6 shadow-sm hover:border-brand-accent"
              href={`/service/${s.slug}`}
            >
              <p class="text-lg font-semibold text-brand-primary">{s.data.title}</p>
              <p class="mt-2 text-sm text-brand-text/80">{s.data.description}</p>
              <p class="mt-4 text-sm font-semibold text-brand-primary">Explore {s.data.title}</p>
            </a>
          ))}
      </div>
    </section>
  </div>
</BaseLayout>
